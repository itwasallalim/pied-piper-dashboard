<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Pied Piper File Manager</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea, #764ba2);
            min-height: 100vh;
            padding: 20px;
        }
        .container { 
            max-width: 1200px; 
            margin: 0 auto; 
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        .header { 
            text-align: center; 
            margin-bottom: 30px; 
            color: #333; 
        }
        .stats { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); 
            gap: 20px; 
            margin-bottom: 30px; 
        }
        .stat-card { 
            background: linear-gradient(135deg, #667eea, #764ba2); 
            color: white; 
            border-radius: 10px; 
            padding: 20px; 
            text-align: center; 
        }
        .stat-number { font-size: 28px; font-weight: bold; }
        .stat-label { font-size: 14px; opacity: 0.9; }
        .file-manager { display: grid; grid-template-columns: 250px 1fr; gap: 20px; }
        .sidebar { background: #f8f9fa; border-radius: 10px; padding: 20px; }
        .folder-item { padding: 12px 16px; margin: 5px 0; cursor: pointer; border-radius: 8px; transition: all 0.2s ease; }
        .folder-item:hover { background: rgba(102, 126, 234, 0.1); }
        .folder-item.active { background: #667eea; color: white; }
        .upload-section { 
            border: 3px dashed #ddd; 
            border-radius: 10px; 
            padding: 40px; 
            text-align: center; 
            margin-bottom: 20px; 
            cursor: pointer; 
            transition: all 0.3s ease; 
        }
        .upload-section:hover { border-color: #667eea; background: rgba(102, 126, 234, 0.05); }
        .file-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); 
            gap: 15px; 
        }
        .file-item { 
            background: white; 
            border: 1px solid #eee; 
            border-radius: 12px; 
            padding: 20px; 
            text-align: center; 
            transition: all 0.3s ease; 
            box-shadow: 0 2px 10px rgba(0,0,0,0.1); 
        }
        .file-item:hover { transform: translateY(-3px); box-shadow: 0 8px 25px rgba(0,0,0,0.15); }
        .file-icon { font-size: 48px; margin-bottom: 10px; }
        .file-name { font-weight: bold; margin-bottom: 5px; font-size: 14px; 
            word-break: break-word; }
        .file-size { color: #666; font-size: 12px; }
        #fileInput { display: none; }
        .category-count { float: right; background: #667eea; color: white; border-radius: 50%; padding: 2px 6px; font-size: 12px; }
        @media (max-width: 768px) { 
            .file-manager { grid-template-columns: 1fr; } 
            .sidebar { order: 2; } 
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üèóÔ∏è Pied Piper File Workspace</h1>
            <p>Upload, organize, and access all team deliverables in one place</p>
        </div>

        <div class="stats">
            <div class="stat-card">
                <div class="stat-number" id="totalFiles">0</div>
                <div class="stat-label">Total Files</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="todayUploads">0</div>
                <div class="stat-label">Uploads Today</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="totalSize">0 KB</div>
                <div class="stat-label">Storage Used</div>
            </div>
        </div>

        <div class="file-manager">
            <div class="sidebar">
                <h3>üìÇ Categories</h3>
                <div class="folder-item active" data-folder="all">
                    All Files 
                    <span class="category-count" id="allCount">0</span>
                </div>
                <div class="folder-item" data-folder="documents">
                    üìÑ Documents 
                    <span class="category-count" id="docsCount">0</span>
                </div>
                <div class="folder-item" data-folder="presentations">
                    üìä Presentations 
                    <span class="category-count" id="presCount">0</span>
                </div>
                <div class="folder-item" data-folder="spreadsheets">
                    üìà Spreadsheets 
                    <span class="category-count" id="sheetsCount">0</span>
                </div>
                <div class="folder-item" data-folder="code">
                    üíª Code Files 
                    <span class="category-count" id="codeCount">0</span>
                </div>
                <div class="folder-item" data-folder="designs">
                    üé® Designs 
                    <span class="category-count" id="designCount">0</span>
                </div>
            </div>

            <div>
                <div class="upload-section" onclick="document.getElementById('fileInput').click()">
                    <input type="file" id="fileInput" multiple style="display: none;">
                    <h3>üì§ Upload Work Products</h3>
                    <p>Drag & drop files here or click to browse<br>
                    <small>PDF, Excel, PowerPoint, code files, images, documents</small></p>
                </div>

                <div class="file-grid" id="fileGrid">
                    <div style="text-align: center; padding: 60px; color: #666;">
                        <i style="font-size: 48px; margin-bottom: 20px;">üìÅ</i>
                        <h3>No files yet</h3>
                        <p>Start uploading your deliverables to build the team's shared workspace</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let files = JSON.parse(localStorage.getItem('piedpiper-files') || '[]');
        
        // File processing
        function handleFiles(newFiles) {
            Array.from(newFiles).forEach(file => {
                if (file.size > 100 * 1024 * 1024) {
                    alert(`${file.name} is too large (50MB max)`);
                    return;
                }
                
                const fileObj = {
                    name: file.name,
                    size: file.size,
                    formattedSize: formatFileSize(file.size),
                    type: file.type,
                    category: getFileCategory(file.name),
                    icon: getFileIcon(file.name),
                    timestamp: Date.now(),
                    date: new Date().toLocaleString()
                };
                files.push(fileObj);
            });

            saveFiles();
            loadFiles();
            updateDisplay();
        }

        function getFileCategory(filename) {
            const ext = filename.split('.').pop().toLowerCase();
            const map = {
                'pdf':'documents', 'doc':'documents', 'docx':'documents', 'txt':'documents',
                'xls':'spreadsheets', 'xlsx':'spreadsheets', 'csv':'spreadsheets',
                'ppt':'presentations', 'pptx':'presentations', 'key':'presentations',
                'js':'code', 'py':'code', 'java':'code', 'cpp':'code', 'c':'code',
                'html':'code', 'css':'code', 'ts':'code', 'json':'code', 'sql':'code',
                'jpg':'designs', 'jpeg':'designs', 'png':'designs', 'gif':'designs',
                'svg':'designs', 'sketch':'designs', 'fig':'designs'
            };
            return map[ext] || 'documents';
        }

        function getFileIcon(filename) {
            const ext = filename.split('.').pop().toLowerCase();
            const icons = {
                'pdf':'üìÑ', 'doc':'üìÑ', 'docx':'üìÑ', 'txt':'üìÑ',
                'xls':'üìä', 'xlsx':'üìä', 'csv':'üìä',
                'ppt':'üìä', 'pptx':'üìä', 'key':'üìä',
                'js':'üíª', 'py':'üíª', 'html':'üíª', 'css':'üíª',
                'jpg':'üñºÔ∏è', 'png':'üñºÔ∏è', 'gif':'üñºÔ∏è', 'svg':'üñºÔ∏è'
            };
            return icons[ext] || 'üìÅ';
        }

        function formatFileSize(bytes) {
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            if (bytes === 0) return '0 Bytes';
            const i = Math.floor(Math.log(bytes) / Math.log(1024));
            return Math.round(bytes / Math.pow(1024, i) * 100) / 100 + ' ' + sizes[i];
        }

        function saveFiles() { localStorage.setItem('piedpiper-files', JSON.stringify(files)); }
        function loadFiles() {
            filterFiles('all');
            updateCounts();
            updateStats();
        }

        function filterFiles(category) {
            const filtered = category === 'all' ? files : files.filter(f => f.category === category);
            const grid = document.getElementById('fileGrid');
            
            if (filtered.length === 0) {
                grid.innerHTML = '<div style="text-align: center; padding: 60px; color: #666;"><h3>Empty folder</h3><p>No files in this category yet</p></div>';
                return;
            }

            grid.innerHTML = filtered.map(file => `
                <div class="file-item">
                    <div class="file-icon">${file.icon}</div>
                    <div class="file-name">${file.name}</div>
                    <div class="file-size">${file.formattedSize} ‚Ä¢ ${file.date}</div>
                </div>
            `).join('');
        }

        function updateStats() {
            document.getElementById('totalFiles').textContent = files.length;
            document.getElementById('todayUploads').textContent = files.filter(f => 
                new Date(f.timestamp).toDateString() === new Date().toDateString()).length;
            document.getElementById('totalSize').textContent = formatFileSize(files.reduce((sum, f) => sum + f.size, 0));
        }

        function updateCounts() {
            ['all', 'documents', 'presentations', 'spreadsheets', 'code', 'designs'].forEach(category => {
                const count = category === 'all' ? files.length : files.filter(f => f.category === category).length;
                const elem = document.getElementById(category + (category === 'all' ? 'Count' : 'Count'));
                if (elem) elem.textContent = count;
            });
        }

        function updateDisplay() {
            loadFiles();
        }

        // Event listeners
        document.querySelectorAll('.folder-item').forEach(folder => {
            folder.addEventListener('click', () => {
                document.querySelectorAll('.folder-item').forEach(f => f.classList.remove('active'));
                folder.classList.add('active');
                filterFiles(folder.dataset.folder);
            });
        });

        const fileInputs = [document.getElementById('fileInput'), document.getElementById('fileInputFiles')];
        fileInputs.forEach(input => {
            input.addEventListener('change', (e) => handleFiles(e.target.files));
        });

        ['dragenter', 'dragover', 'drop'].forEach(eventName => {
            document.addEventListener(eventName, (e) => {
                if (eventName === 'drop' && e.dataTransfer.files.length > 0) {
                    handleFiles(e.dataTransfer.files);
                }
                e.preventDefault();
                e.stopPropagation();
            });
        });

        // Initialize
        loadFiles();
        updateDisplay();
    </script>
</body>
</html>